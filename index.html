<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="Permissions-Policy"
        content="accelerometer=(), camera=(), geolocation=(), gyroscope=(), magnetometer=(), microphone=(), usb=(), xr-spatial-tracking=()">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Mykonos Residencial Playa</title>
    <meta name="description" content="Mykonos Residencial Playa">
    <link rel="icon" href="img/init/init-icon.png">

    <script src="https://cesium.com/downloads/cesiumjs/releases/1.115/Build/Cesium/Cesium.js"></script>
    <link href="https://cesium.com/downloads/cesiumjs/releases/1.115/Build/Cesium/Widgets/widgets.css" rel="stylesheet">
    <link rel="stylesheet" href="./css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Black+Ops+One&family=Fredoka+One&family=Bebas+Neue:wght@400&family=Anton&display=swap"
        rel="stylesheet">
    <script src="./js/index.js" type="module"></script>
</head>

<body>

    <!-- Splash Screen -->
    <div class="splash-screen" id="splash-screen">
        <img src="img/init/init-logo.svg" alt="Reveal Vision logo">
    </div>

    <!-- Overlay con instrucciones de navegación -->
    <div class="instructions-overlay" id="instructions-overlay">
        <div>

            <h2>Instrucciones de navegación</h2>

            <!-- Instrucciones para Desktop -->
            <div class="instructions-container">
                <div class="instruction background-container">
                    <img src="img/instructions/PC/click.svg" alt="Clic sostenido" class="mouse-icon">
                    <div class="instruction-text background-light-container">
                        <div class="instruction-title">Clic sostenido</div>
                        <div class="instruction-subtitle">Desplazarse</div>
                    </div>
                </div>

                <div class="instruction background-container">
                    <img src="img/instructions/PC/wheel.svg" alt="Deslizar rueda" class="mouse-icon">
                    <div class="instruction-text background-light-container">
                        <div class="instruction-title">Deslizar rueda</div>
                        <div class="instruction-subtitle">Ajustar zoom</div>
                    </div>
                </div>

                <div class="instruction background-container">
                    <img src="img/instructions/PC/scroll.svg" alt="Rueda sostenida" class="mouse-icon">
                    <div class="instruction-text background-light-container">
                        <div class="instruction-title">Rueda sostenida</div>
                        <div class="instruction-subtitle">Cambiar perspectiva</div>
                    </div>
                </div>
            </div>

            <!-- Instrucciones para Mobile -->
            <div class="instructions-container-mobile">
                <div class="instruction-mobile background-container">
                    <img src="img/instructions/movil/pinch-zoom.png" alt="Tocar y arrastrar" class="hand-icon">
                    <div class="instruction-text background-light-container">
                        <div class="instruction-title">Pellizca con dos dedos </div>
                        <div class="instruction-subtitle">Ajustar zoom</div>
                    </div>
                </div>

                <div class="instruction-mobile background-container">
                    <img src="img/instructions/movil/rotate-fingers.png" alt="Pellizcar" class="hand-icon">
                    <div class="instruction-text background-light-container">
                        <div class="instruction-title">Girar con dos dedos</div>
                        <div class="instruction-subtitle">Rotación</div>
                    </div>
                </div>

                <div class="instruction-mobile background-container">
                    <img src="img/instructions/movil/drag-finger.png" alt="Arrastrar con dos dedos" class="hand-icon">
                    <div class="instruction-text background-light-container">
                        <div class="instruction-title">Arrastrar el dedo</div>
                        <div class="instruction-subtitle">Desplazarse</div>
                    </div>
                </div>

                <div class="instruction-mobile background-container">
                    <img src="img/instructions/movil/tap-finger.png" alt="Tocar elemento" class="hand-icon">
                    <div class="instruction-text background-light-container">
                        <div class="instruction-title">Hacer tap</div>
                        <div class="instruction-subtitle">Ver más detalles</div>
                    </div>
                </div>
            </div>

            <button class="understood-btn background-btn" id="instructions-close-button">Entendido</button>
        </div>
    </div>

    <!-- Sidebar -->
    <nav class="sidebar background-container border-container">
        <div class="sidebar-logo">
            <img src="img/logo_mikonos.png" alt="Mykonos Residencial Playa">
        </div>

        <div class="sidebar-container">
            <div class="sidebar-items">
                <a id="fotos" class="sidebar-item">
                    <img src="img/sidebar/icon_fotos.svg" alt="Fotos 360°">
                    <span>Fotos 360°</span>
                </a>

                <a id="areas" class="sidebar-item">
                    <img src="img/sidebar/icon_areas.svg" alt="Áreas comunes">
                    <span>Áreas comunes</span>
                </a>

                <a id="lotes" class="sidebar-item">
                    <img src="img/sidebar/icon_lotes.svg" alt="Lotes">
                    <span>Lotes</span>
                </a>

                <a id="entorno" class="sidebar-item">
                    <img src="img/sidebar/icon_entorno.svg" alt="Entorno">
                    <span>Entorno</span>
                </a>

                <a id="video" class="sidebar-item">
                    <img src="img/sidebar/icon_video.svg" alt="Video">
                    <span>Video</span>
                </a>
            </div>
        </div>
    </nav>

    <!-- Bottombar -->
    <div class="bottombar">
        <!-- Barra de iconos -->
        <div class="bottombar-icon-toolbar background-container border-container">
            <button id="home" class="bottombar-icon-button">
                <img src="img/bottombar/home.svg" alt="Home">
            </button>

            <div class="bottombar-divider"></div>

            <button id="up" class="bottombar-icon-button">
                <img src="img/bottombar/up.svg" alt="Up">
            </button>

            <div class="bottombar-divider"></div>

            <button id="down" class="bottombar-icon-button">
                <img src="img/bottombar/down.svg" alt="Down">
            </button>

            <div class="bottombar-divider"></div>

            <button id="zoomIn" class="bottombar-icon-button">
                <img src="img/bottombar/zoom+.svg" alt="Zoom In">
            </button>

            <div class="bottombar-divider"></div>

            <button id="zoomOut" class="bottombar-icon-button">
                <img src="img/bottombar/zoom-.svg" alt="Zoom Out">
            </button>

            <div class="bottombar-divider"></div>

            <button id="view3d" class="bottombar-icon-button">
                <img src="img/bottombar/3D.svg" alt="3D">
            </button>

            <div class="bottombar-divider"></div>

            <button id="grid" class="bottombar-icon-button">
                <img src="img/bottombar/plot.svg" alt="Plot">
            </button>
        </div>

        <!-- Botones de estado -->
        <div class="bottombar-status-buttons">
            <button class="bottombar-status-button disponible">
                <span class="bottombar-status-indicator"></span>
                Disponible
            </button>

            <button class="bottombar-status-button reservado">
                <span class="bottombar-status-indicator"></span>
                Reservado
            </button>

            <button class="bottombar-status-button vendido">
                <span class="bottombar-status-indicator"></span>
                Vendido
            </button>
        </div>
    </div>

    <!-- Cesium -->
    <div id="cesium-container"></div>


    <!-- Modal Lote Contenido -->
    <div class="lot-modal background-container border-container" id="modalOverlay" style="display: none;">
        <a class="lot-modal-back-link" href="#" onclick="closeModal()">
            <i class="fas fa-arrow-left"></i>
            <span>Volver</span>
        </a>
        <div class="lot-modal-header">
            <div class="lot-modal-logo">
                <img src="img/logo_mikonos.png" alt="Mykonos Residencial Playa">
            </div>
        </div>

        <div class="lot-modal-content">
            <div class="lot-identification">
                <div class="lot-box">
                    <span id="modalLot">Mz. C - Lt. 7</span>
                </div>
                <div class="lot-status-badge" id="modalStatus">Disponible</div>
            </div>

            <div class="lot-property-details">
                <div class="lot-detail-row">
                    <span class="lot-detail-label">Precio</span>
                    <span class="lot-detail-value" id="modalPrice">$ 28,000</span>
                </div>
                <div class="lot-detail-row">
                    <span class="lot-detail-label">Área</span>
                    <span class="main-detail-value" id="modalArea">115,00 m²</span>
                </div>
            </div>

            <div class="lot-boundaries-section">
                <h3 class="lot-boundaries-title">Colindancias</h3>
                <div class="lot-boundaries-card">
                    <div class="lot-boundary-item">
                        <div class="lot-boundary-icon">
                            <img src="img/lote/izquierda.svg" alt="Izquierda" class="lot-boundary-icon-svg">
                        </div>
                        <span class="lot-boundary-label">Izquierda</span>
                        <span class="lot-boundary-value" id="modalLeft">12.00ML</span>
                    </div>
                    <div class="lot-boundary-item">
                        <div class="lot-boundary-icon">
                            <img src="img/lote/derecha.svg" alt="Derecha" class="lot-boundary-icon-svg">
                        </div>
                        <span class="lot-boundary-label">Derecha</span>
                        <span class="lot-boundary-value" id="modalRight">12.00ML</span>
                    </div>
                    <div class="lot-boundary-item">
                        <div class="lot-boundary-icon">
                            <img src="img/lote/frente.svg" alt="Frente" class="lot-boundary-icon-svg">
                        </div>
                        <span class="lot-boundary-label">Frente</span>
                        <span class="lot-boundary-value" id="modalFront">12.00ML</span>
                    </div>
                    <div class="lot-boundary-item">
                        <div class="lot-boundary-icon">
                            <img src="img/lote/fondo.svg" alt="Fondo" class="lot-boundary-icon-svg">
                        </div>
                        <span class="lot-boundary-label">Fondo</span>
                        <span class="lot-boundary-value" id="modalBack">12.00ML</span>
                    </div>
                </div>
            </div>

            <button class="lot-whatsapp-btn">
                <i class="fa-brands fa-whatsapp"></i>
                <span>Cotiza tu lote</span>
            </button>
        </div>
    </div>

    <!-- Overlay para Fotos 360° -->
    <div class="overlay-360-background" id="overlay360" style="display: none;">
        <div class="overlay-360">
            <button class="close-btn" id="overlay-360-close-btn">
                <i class="fas fa-times"></i>
            </button>
            <div class="overlay-360-content">
                <iframe id="overlay360Iframe" src="" frameborder="0" allowfullscreen
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; xr-spatial-tracking"
                    sandbox="allow-same-origin allow-scripts allow-popups allow-forms"></iframe>
            </div>
        </div>
    </div>

    <!-- Modal para Áreas comunes -->
    <div class="common-areas-modal background-container border-container" id="commonAreasModalOverlay"
        style="display: none;">
        <button class="close-btn" id="closeCommonAreasModal">
            <i class="fas fa-times"></i>
        </button>
        <div class="common-areas-modal-header">
            <div class="common-areas-modal-title">
                <img src="img/sidebar/areas/comunidad.svg" alt="Comunidad" class="common-areas-modal-icon">
                <span>Comunidad</span>
            </div>
        </div>
        <div class="common-areas-modal-content">
            <div class="common-areas-section">
                <div class="common-areas-grid" id="commonAreasGrid">
                </div>
            </div>
        </div>
    </div>

    <!-- Overlay para Imágenes de Áreas Comunes -->
    <div class="common-areas-overlay" id="areasComunesImagesModalOverlay" style="display: none;">
        <div class="common-areas-container-image">
            <button class="close-btn" id="areasComunesImagesCloseBtn">
                <i class="fas fa-times"></i>
            </button>
            <div class="common-areas-image">
                <img id="areasComunesImage" src="" alt="Imagen del área común" />
            </div>
        </div>
    </div>

    <!-- Modal para Búsqueda de Lotes -->
    <div class="lot-search-modal background-container border-container" id="lotSearchModalOverlay"
        style="display: none;">
        <button class="close-btn" id="closeLotSearchModal">
            <i class="fas fa-times"></i>
        </button>
        <div class="lot-search-header">
            <div class="lot-search-title">
                <img src="img/sidebar/lotes/busqueda_lotes.svg" alt="Búsqueda de lotes" class="lot-search-icon">
                <span>Búsqueda de lotes</span>
            </div>
        </div>

        <div class="lot-search-content">
            <div class="filters-container">
                <div class="filter-section">
                    <label class="filter-label">Precio</label>
                    <div class="range-slider-container">
                        <div class="range-slider price-range-slider">
                            <span class="output outputOne price-output-min"></span>
                            <span class="output outputTwo price-output-max"></span>
                            <span class="full-range"></span>
                            <span class="incl-range"></span>
                            <input name="priceMin" value="0" min="0" max="60000" step="1000" type="range">
                            <input name="priceMax" value="60000" min="0" max="60000" step="1000" type="range">
                        </div>
                    </div>
                </div>
                <div class="filter-section">
                    <label class="filter-label">Área</label>
                    <div class="range-slider-container">
                        <div class="range-slider area-range-slider">
                            <span class="output outputOne area-output-min"></span>
                            <span class="output outputTwo area-output-max"></span>
                            <span class="full-range"></span>
                            <span class="incl-range"></span>
                            <input name="areaMin" value="90" min="90" max="500" step="1" type="range">
                            <input name="areaMax" value="500" min="90" max="500" step="1" type="range">
                        </div>
                    </div>
                </div>
                <div class="clear-filters-container">
                    <button class="clear-filters" id="clearFiltersBtn">Limpiar filtros</button>
                </div>
            </div>

            <div class="filters-secondary">
                <div class="filter-section">
                    <label class="filter-label">Ordenar por</label>
                    <div class="dropdown-container">
                        <select id="sortSelect" class="sort-dropdown">
                            <option value="area-asc">Área: de menor a mayor</option>
                            <option value="area-desc">Área: de mayor a menor</option>
                            <option value="price-asc">Precio: de menor a mayor</option>
                            <option value="price-desc">Precio: de mayor a menor</option>
                            <option value="number-asc">Número: de menor a mayor</option>
                            <option value="number-desc">Número: de mayor a menor</option>
                        </select>
                    </div>
                </div>
                <div class="filter-section">
                    <label class="filter-label">Estado</label>
                    <div class="status-buttons">
                        <button class="status-btn" data-status="vendido">Vendido</button>
                        <button class="status-btn" data-status="reservado">Reservado</button>
                        <button class="status-btn active" data-status="disponible">Disponible</button>
                    </div>
                </div>
            </div>

            <div class="results-section">
                <div class="results-count" id="resultsCount">Mostrando (0) lotes</div>
                <div class="lot-cards-container" id="lotCardsContainer">
                </div>
            </div>
        </div>
    </div>

    <!-- Botones del entorno -->
    <div class="around-buttons-container" id="aroundButtonsContainer" style="display: none;">
        <div class="around-button active">
            <img src="img/sidebar/icon_entorno.svg" alt="Todos">
            <span>Todos</span>
        </div>
        <div class="around-button">
            <img src="img/sidebar/entorno/iconos/playas.svg" alt="Playas">
            <span>Playas</span>
        </div>
        <div class="around-button">
            <img src="img/sidebar/entorno/iconos/restaurantes.svg" alt="Restaurantes">
            <span>Restaurantes</span>
        </div>
        <div class="around-button">
            <img src="img/sidebar/entorno/iconos/hoteles.svg" alt="Hoteles">
            <span>Hoteles</span>
        </div>
        <div class="around-button">
            <img src="img/sidebar/entorno/iconos/turismo.svg" alt="Turismo">
            <span>Turismo</span>
        </div>
        <div class="around-button">
            <img src="img/sidebar/entorno/iconos/seguridad.svg" alt="Seguridad">
            <span>Seguridad</span>
        </div>
    </div>

    <!-- Modal Entorno -->
    <div class="around-modal background-container border-container" id="aroundModalOverlay" style="display: none;">
        <button class="close-btn" id="closeAroundModal">
            <i class="fas fa-times"></i>
        </button>
        <div class="around-modal-header">
            <div class="around-modal-title">
                <img src="img/sidebar/entorno/iconos/playas.svg" id="locationModalIcon" alt="Playas"
                    class="around-modal-icon">
                <span id="aroundModalTitle">Playas</span>
            </div>
        </div>
        <div class="around-modal-content">
            <div class="around-section">
                <div class="around-card-image" id="aroundModalImage"
                    style="background-image: url('img/club_house.jpg');">
                </div>
                <div class="around-card-title" id="aroundCardTitle">Club House</div>
                <div class="around-card-details">
                    <h2>Ubicación:</h2>
                    <p id="aroundModalAddress">-17.102105, -71.9072266</p>
                    <div class="around-card-info-row">
                        <div class="around-card-time-estimate" id="aroundModalTimeEstimate" style="display: none;">
                            <span id="aroundModalTime">5 mins</span>
                        </div>
                        <button class="around-card-link-button" id="calculateRouteBtn">
                            Cómo llegar &#8599
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Overlay para Video -->
    <div class="video-overlay-background" id="videoModalOverlay" style="display: none;">
        <div class="video-overlay">
            <button class="close-btn" id="closeVideoModal">
                <i class="fas fa-times"></i>
            </button>
            <video id="videoPlayer" autoplay controls>
                <source src="img/sidebar/video/video.mp4" type="video/mp4">
                Tu navegador no soporta el elemento de video.
            </video>
        </div>
    </div>


    <script>

        function closeModal() {
            document.querySelector('.lot-modal').style.display = 'none';
            // Limpiar selección del polígono si existe
            if (window.cesiumClearSelection) {
                try { window.cesiumClearSelection(); } catch (e) { /* noop */ }
            }
        }
    </script>
</body>

</html>